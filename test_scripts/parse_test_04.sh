#/!bin/bash
awk 'BEGIN{i=0};{if ($1=="TOTAL"){meta=$10;if($11=="GiB"){ meta=meta*1024} }; if ($1 == "base_pool") {base_used=$2; if ($3=="GiB"){base_used = base_used * 1024}; base_wr=$14;if ($15=="GiB"){base_wr *= 1024}}; if ($1=="chunk_pool"){chunk_used=$2;if ($3=="GiB"){chunk_used*=1024;};chunk_wr=$14;if($15 == "GiB"){chunk_wr*=1024} print i,meta,base_used,base_wr,chunk_used,chunk_wr;i+=5}}' test_04_chunk_4096.log > chunk_4096_result.log
awk '{if ($1 == "WRITE:") {print $6,$8}}' test_04_fio_chunk_4096.log >> chunk_4096_result.log
awk 'BEGIN{i=0};{if ($1=="TOTAL"){meta=$10;if($11=="GiB"){ meta=meta*1024} }; if ($1 == "base_pool") {base_used=$2; if ($3=="GiB"){base_used = base_used * 1024}; base_wr=$14;if ($15=="GiB"){base_wr *= 1024}}; if ($1=="chunk_pool"){chunk_used=$2;if ($3=="GiB"){chunk_used*=1024;};chunk_wr=$14;if($15 == "GiB"){chunk_wr*=1024} print i,meta,base_used,base_wr,chunk_used,chunk_wr;i+=5}}' test_04_chunk_8192.log > chunk_8192_result.log
awk '{if ($1 == "WRITE:") {print $6,$8}}' test_04_fio_chunk_8192.log >> chunk_8192_result.log
awk 'BEGIN{i=0};{if ($1=="TOTAL"){meta=$10;if($11=="GiB"){ meta=meta*1024} }; if ($1 == "base_pool") {base_used=$2; if ($3=="GiB"){base_used = base_used * 1024}; base_wr=$14;if ($15=="GiB"){base_wr *= 1024}}; if ($1=="chunk_pool"){chunk_used=$2;if ($3=="GiB"){chunk_used*=1024;};chunk_wr=$14;if($15 == "GiB"){chunk_wr*=1024} print i,meta,base_used,base_wr,chunk_used,chunk_wr;i+=5}}' test_04_chunk_16384.log > chunk_16384_result.log
awk '{if ($1 == "WRITE:") {print $6,$8}}' test_04_fio_chunk_16384.log >> chunk_16384_result.log
awk 'BEGIN{i=0};{if ($1=="TOTAL"){meta=$10;if($11=="GiB"){ meta=meta*1024} }; if ($1 == "base_pool") {base_used=$2; if ($3=="GiB"){base_used = base_used * 1024}; base_wr=$14;if ($15=="GiB"){base_wr *= 1024}}; if ($1=="chunk_pool"){chunk_used=$2;if ($3=="GiB"){chunk_used*=1024;};chunk_wr=$14;if($15 == "GiB"){chunk_wr*=1024} print i,meta,base_used,base_wr,chunk_used,chunk_wr;i+=5}}' test_04_chunk_32768.log > chunk_32768_result.log
awk '{if ($1 == "WRITE:") {print $6,$8}}' test_04_fio_chunk_32768.log >> chunk_32768_result.log
awk 'BEGIN{i=0};{if ($1=="TOTAL"){meta=$10;if($11=="GiB"){ meta=meta*1024} }; if ($1 == "base_pool") {base_used=$2; if ($3=="GiB"){base_used = base_used * 1024}; base_wr=$14;if ($15=="GiB"){base_wr *= 1024}}; if ($1=="chunk_pool"){chunk_used=$2;if ($3=="GiB"){chunk_used*=1024;};chunk_wr=$14;if($15 == "GiB"){chunk_wr*=1024} print i,meta,base_used,base_wr,chunk_used,chunk_wr;i+=5}}' test_04_chunk_65536.log > chunk_65536_result.log
awk '{if ($1 == "WRITE:") {print $6,$8}}' test_04_fio_chunk_65536.log >> chunk_65536_result.log
